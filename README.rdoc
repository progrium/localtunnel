= localtunnel -- instant public tunnel to your local web server

== Install 

To get the dependencies if you don't have them, type:

    sudo apt-get install ruby ruby1.8-dev rubygems1.8 libopenssl-ruby

Now you can install localtunnel with RubyGems:

    sudo gem install localtunnel 

or to get the source:

    git clone http://github.com/progrium/localtunnel.git

== Usage

    localtunnel [options] <localport>
      -k, --key    FILE    upload a public key for authentication
      -c, --config NAME    load an autoconfiguration plugin

Localtunnel is a client to a free and open source reverse tunneling
service made specifically for web traffic. It's intended to be used to
temporarily expose local web servers to the greater Internet for
debugging, unit tests, demos, etc.   

This is how you make your local port 8080 public:

    $ localtunnel 8080
    Port 8080 is now publicly accessible from http://8bv2.localtunnel.com ...

Using localtunnel is comparable to using SSH reverse/remote port
forwarding on a remote host that has GatewayPorts enabled, but without
all the configuration or the need of a host. The localtunnel command
works with a server component that is running on localtunnel.com,
which is provided as a free service.

If have never run localtunnel before, you'll need to upload a public
key to authenticate. You do this once:

    $ localtunnel -k ~/.ssh/id_rsa.pub 8080

After that, you shouldn't have to use -k again.

Localtunnel can be started before or after the local web server.   It
tunnels through to the url given in that status message "publicly
accessible from..." for as long as the command is running.  The tunnel
is closed if the command exits.

== Advanced

When using localtunnel for local development work against an API that leverages
web hooks, the painful workflow can sometimes look like this:
1. Run localtunnel
2. Copy the resulting http address
3. Log into your API provider and update your 'app' settings using the new address
4. $$ Profit
(Optional additional workflow)
5. Close your laptop lid and put your machine to sleep for a bit
6. Reopen the lid, and start over at step 1

Using an extensibility approach based on Rails generators, you can write
code that gets executed by localtunnel after it registers for a new host
and before it sits idle holding the connection open. You can use this to
automate updating web hook settings.

Create a class with a name that ends in AutoConfig, inherits from
LocalTunnel::AutoConfig::Base, and contains a method 'configure' that accepts
a parameter which represents the newly registered host name.
Place it in a file named foo_auto_config.rb under a localtunnel subdirectory.
For example, to update a http://twilio.com/ application every time localtunnel is run:

in ~/MyApp/localtunnel/twilio_auto_config.rb

    require 'rubygems'
    require 'localtunnel/autoconfig'
    require 'twilio-ruby'
    require 'uri'

    class TwilioAutoConfig < LocalTunnel::AutoConfig::Base

      TWILIO_ACCOUNT_SID = "AC1be565743ead79bad7d725f438a158ae"
      TWILIO_AUTH_TOKEN = ENV['TWILIO_AUTH_TOKEN']
      TWILIO_APP_SID = ENV['TWILIO_APP_SID']

      def configure(host)
        # set up a client to talk to the Twilio REST API
        account_sid = # your account sid here
        auth_token = # your auth token here
        app_sid = # your app sid you want to update here

        client = Twilio::REST::Client.new(account_sid, auth_token)
        app = client.account.applications.get(app_sid)

        # Grab the current voice_url and swap out the host
        voice = URI.parse(app.voice_url)
        voice.host = host

        app.update({:voice_url => voice.to_s})
        puts "   Configured Twilio app #{app.friendly_name} for new host #{host}"
      end
    end

from the command line

    $ cd ~/MyApp
    $ localtunnel -c twilio 9292
       Configured Twilio app myapp-dev for new host 47sf.localtunnel.com
       Port 9292 is now publicly accessible from http://47sf.localtunnel.com ...

== Contributors

    andyl (andy@r210.com) 
    Charles Merriam (charles.merriam@gmail.com) 
    Hunter Gillane (hunter.gillane@gmail.com) 
    Michael Sofaer (msofaer@pivotallabs.com) 
    Jeff Lindsay (progrium@gmail.com)

== License

MIT
